"use strict";(self.webpackChunkcreate_project_docs=self.webpackChunkcreate_project_docs||[]).push([[1221],{19539:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>c,default:()=>x,frontMatter:()=>t,metadata:()=>d,toc:()=>o});const d=JSON.parse('{"id":"internal-contracts/question-api","title":"Question API","description":"GET /api/question. Returns one question from an in-memory cache loaded from public/dataset.csv on first call. Filters are ANDed together. Returns a random match from all qualifying rows.","source":"@site/docs/internal-contracts/question-api.md","sourceDirName":"internal-contracts","slug":"/internal-contracts/question-api","permalink":"/project-code-battlegrounds-1-5/docs/internal-contracts/question-api","draft":false,"unlisted":false,"editUrl":"https://github.com/Capstone-Projects-2026-spring/project-code-battlegrounds-1-5/edit/main/documentation/docs/internal-contracts/question-api.md","tags":[],"version":"current","lastUpdatedBy":"samirbuch","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Question API"},"sidebar":"docsSidebar","previous":{"title":"Middleware","permalink":"/project-code-battlegrounds-1-5/docs/internal-contracts/proxy"},"next":{"title":"UI Components","permalink":"/project-code-battlegrounds-1-5/docs/internal-contracts/components"}}');var i=n(74848),r=n(28453);const t={sidebar_position:5,title:"Question API"},c="Question API \u2014 src/pages/api/question.ts",l={},o=[{value:"<code>Question</code> interface",id:"question-interface",level:2},{value:"Module-level state",id:"module-level-state",level:2},{value:"Functions",id:"functions",level:2},{value:"<code>loadQuestions(): Promise&lt;Question[]&gt;</code> <em>(private)</em>",id:"loadquestions-promisequestion-private",level:3},{value:"<code>handler(req: NextApiRequest, res: NextApiResponse): Promise&lt;void&gt;</code>",id:"handlerreq-nextapirequest-res-nextapiresponse-promisevoid",level:3},{value:"Query parameters",id:"query-parameters",level:4}];function h(e){const s={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsxs)(s.h1,{id:"question-api--srcpagesapiquestionts",children:["Question API \u2014 ",(0,i.jsx)(s.code,{children:"src/pages/api/question.ts"})]})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"GET /api/question"}),". Returns one question from an in-memory cache loaded from ",(0,i.jsx)(s.code,{children:"public/dataset.csv"})," on first call. Filters are ANDed together. Returns a random match from all qualifying rows."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h2,{id:"question-interface",children:[(0,i.jsx)(s.code,{children:"Question"})," interface"]}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Field"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"id"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"number"})}),(0,i.jsx)(s.td,{children:"Zero-based CSV row index."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"questionId"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"number"})}),(0,i.jsx)(s.td,{children:"LeetCode question ID."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"title"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"string"})}),(0,i.jsx)(s.td,{children:"Question title."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"slug"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"string"})}),(0,i.jsxs)(s.td,{children:["URL-safe identifier (e.g. ",(0,i.jsx)(s.code,{children:'"two-sum"'}),"). Unique."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"text"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"string"})}),(0,i.jsx)(s.td,{children:"Problem statement, whitespace-trimmed."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"topics"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"string[]"})}),(0,i.jsx)(s.td,{children:"Topic tags. May be empty."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"difficulty"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:'"Easy" | "Medium" | "Hard"'})}),(0,i.jsx)(s.td,{children:"Difficulty level."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"successRate"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"number"})}),(0,i.jsx)(s.td,{children:"Accepted / total submissions (0\u20131)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"totalSubmissions"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"number"})}),(0,i.jsx)(s.td,{children:"Total submission count."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"totalAccepted"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"number"})}),(0,i.jsx)(s.td,{children:"Total accepted submission count."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"likes"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"number"})}),(0,i.jsx)(s.td,{children:"Upvote count."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"dislikes"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"number"})}),(0,i.jsx)(s.td,{children:"Downvote count."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"likeRatio"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"number"})}),(0,i.jsx)(s.td,{children:"likes / (likes + dislikes)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"hints"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"string[]"})}),(0,i.jsx)(s.td,{children:"Hints. May be empty."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"similarQuestionIds"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"number[]"})}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"questionId"}),"s of related questions. May be empty."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"similarQuestionTitles"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"string[]"})}),(0,i.jsxs)(s.td,{children:["Titles matching ",(0,i.jsx)(s.code,{children:"similarQuestionIds"})," order. May be empty."]})]})]})]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"module-level-state",children:"Module-level state"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Name"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsx)(s.tbody,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"cachedQuestions"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"Question[] | null"})}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"null"})," until first call to ",(0,i.jsx)(s.code,{children:"loadQuestions()"}),". Write-once \u2014 never modified after population."]})]})})]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"functions",children:"Functions"}),"\n",(0,i.jsxs)(s.h3,{id:"loadquestions-promisequestion-private",children:[(0,i.jsx)(s.code,{children:"loadQuestions(): Promise<Question[]>"})," ",(0,i.jsx)(s.em,{children:"(private)"})]}),"\n",(0,i.jsxs)(s.p,{children:["Parses ",(0,i.jsx)(s.code,{children:"public/dataset.csv"})," into ",(0,i.jsx)(s.code,{children:"Question[]"})," and caches the result. Returns the cached array on subsequent calls without re-reading the file."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Preconditions:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"public/dataset.csv"})," exists at ",(0,i.jsx)(s.code,{children:"process.cwd()/public/dataset.csv"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:["CSV has a header row as row 1 (skipped via ",(0,i.jsx)(s.code,{children:"from_line: 2"}),")."]}),"\n",(0,i.jsx)(s.li,{children:"Columns must be in the declared order."}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Postconditions:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Returns the same array reference on every call after the first."}),"\n",(0,i.jsxs)(s.li,{children:["Rows with parse errors are silently skipped (",(0,i.jsx)(s.code,{children:"skipRecordsWithError: true"}),")."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Throws:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Node.js ",(0,i.jsx)(s.code,{children:"Error"})," (",(0,i.jsx)(s.code,{children:"ENOENT"}),", ",(0,i.jsx)(s.code,{children:"EACCES"}),", etc.) if the file does not exist or cannot be read."]}),"\n",(0,i.jsx)(s.li,{children:"Rejects if the CSV stream itself errors (malformed file)."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"handlerreq-nextapirequest-res-nextapiresponse-promisevoid",children:(0,i.jsx)(s.code,{children:"handler(req: NextApiRequest, res: NextApiResponse): Promise<void>"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Method:"})," ",(0,i.jsx)(s.code,{children:"GET"})," only. Returns ",(0,i.jsx)(s.code,{children:"405"})," for any other method."]}),"\n",(0,i.jsx)(s.h4,{id:"query-parameters",children:"Query parameters"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Param"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Filter applied"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"id"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"string?"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"question.questionId === Number(id)"})})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"slug"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"string?"})}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"question.slug === slug"})," (exact match)"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"difficulty"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"string?"})}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"question.difficulty"})," case-insensitive match against ",(0,i.jsx)(s.code,{children:'"Easy"'}),", ",(0,i.jsx)(s.code,{children:'"Medium"'}),", or ",(0,i.jsx)(s.code,{children:'"Hard"'})]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"topic"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"string?"})}),(0,i.jsxs)(s.td,{children:["Any topic tag contains ",(0,i.jsx)(s.code,{children:"topic"})," (case-insensitive substring)"]})]})]})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Returns:"})," ",(0,i.jsx)(s.code,{children:"{ question: Question }"})," \u2014 one randomly selected match."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Preconditions:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"At least one question must match the filter set, or no filters are provided."}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Error responses:"})}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Status"}),(0,i.jsx)(s.th,{children:"Condition"}),(0,i.jsx)(s.th,{children:"Body"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"405"})}),(0,i.jsx)(s.td,{children:"Non-GET request"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:'{ error: "Method not allowed" }'})})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"404"})}),(0,i.jsx)(s.td,{children:"No questions match filters"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:'{ error: "No questions match the given filters" }'})})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"500"})}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"loadQuestions()"})," rejected"]}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:'{ error: "Failed to load questions" }'})," (also logs to ",(0,i.jsx)(s.code,{children:"console.error"}),")"]})]})]})]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Examples:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:'GET /api/question\n-> 200 { question: { questionId: 1, title: "Two Sum", ... } }\n\nGET /api/question?difficulty=Hard&topic=graph\n-> 200 { question: { ... } }\n\nGET /api/question?id=9999\n-> 404 { error: "No questions match the given filters" }\n\nPOST /api/question\n-> 405 { error: "Method not allowed" }\n'})})]})}function x(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>c});var d=n(96540);const i={},r=d.createContext(i);function t(e){const s=d.useContext(r);return d.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),d.createElement(r.Provider,{value:s},e.children)}}}]);